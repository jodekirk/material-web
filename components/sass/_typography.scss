//
// Copyright 2021 Google LLC
// SPDX-License-Identifier: Apache-2.0
//

@use 'sass:map';
@use 'sass:meta';
@use './theme';

@function resolver($args...) {
  $args: meta.keywords($args);
  @return (
    font: map.get($args, font),
    line-height: px-to-rem(map.get($args, line-height)),
    size: px-to-rem(map.get($args, size)),
    tracking: px-to-rem(map.get($args, tracking)),
    weight: map.get($args, weight)
  );
}

@function px-to-rem($px) {
  @if $px == null {
    @return null;
  }

  @return math.div($px, 16px) * 1rem;
}

@mixin static-styles() {
  @include _font-smoothing;
}

/// Applies antialiasing via font-smoothing to text.
@mixin _font-smoothing() {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
}

$_reference-theme: (
  font: null,
  line-height: null,
  size: null,
  tracking: null,
  weight: null,
);

@mixin theme-styles($theme) {
  $theme: theme.validate-theme-styles(
    $_reference-theme,
    $theme,
    $require-all: false
  );
  @include _font($theme);
}

@mixin _font($font) {
  font-family: map.get($font, font);
  font-size: map.get($font, size);
  font-weight: map.get($font, weight);
  letter-spacing: map.get($font, tracking);
  line-height: map.get($font, line-height);
}
